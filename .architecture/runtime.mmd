sequenceDiagram
  autonumber
  actor U as Usuário (Browser)
  participant FE as Frontend (GitHub Pages / Static)
  participant MM as MetaMask (window.ethereum)
  participant MMDL as MetaMask App Link
  participant PX as Polygon Network

  U->>FE: Acessa o site
  FE-->>U: Renderiza Home + CTA "Conectar MetaMask"
  FE-->>U: Anima slogan (digitação + re-digitação da palavra, pausa em Transparente)
  FE-->>U: Tenta autoplay do vídeo de fundo (fallback se falhar)

  U->>FE: Clica em Conectar
  alt MetaMask não detectada (desktop/mobile)
    FE-->>U: Abre modal com instruções + CTAs
    opt Mobile
      FE->>MMDL: Deep link "Abrir na MetaMask"
    end
  else MetaMask detectada
    FE->>MM: eth_requestAccounts
    alt Usuário rejeita
      MM-->>FE: Erro 4001
      FE-->>U: Toast "Conexão cancelada"
    else Usuário aprova
      MM-->>FE: Conta conectada
      opt Rede incorreta
        FE->>MM: wallet_switchEthereumChain / wallet_addEthereumChain
      end
      FE->>PX: Chamadas via ethers.js (leitura/escrita)
      PX-->>FE: Resultados / tx receipts
    end
  end

  opt Usuário troca conta na MetaMask
    MM-->>FE: accountsChanged([newAccount])
    FE-->>U: UI atualiza (header/home) + toast
  end

  U->>FE: Navega para Criar Contrato
  FE-->>U: Mostra wizard (passo-a-passo)
  loop Passos do wizard (validando por etapa)
    U->>FE: Preenche etapa atual
    FE-->>U: Voltar/Próximo (não avança se inválido)
  end
  U->>FE: Revisão e Deploy
  FE->>MM: Assina transação de deploy (ethers)
  MM-->>FE: Tx enviada
  FE->>PX: Deploy do contrato
  PX-->>FE: Contract address
  FE-->>U: Card final (resumo + aviso + botão Copiar)

